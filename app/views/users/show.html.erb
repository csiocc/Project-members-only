<% content_for :title, (@user.name.presence || "User") %>

<div class="card">
  <div class="card-header">
    <h1 class="card-title"><%= @user.name.presence || "User" %></h1>
  </div>

  <p class="meta">
    <% if @user.respond_to?(:created_at) && @user.created_at %>
      Joined <%= l(@user.created_at, format: :short) %>
    <% end %>
    <% if @user.respond_to?(:posts) %>
      Â· <%= pluralize(@user.posts.size, "post") %>
    <% end %>
  </p>

  <div class="actions mt-2">
    <%= link_to "All users", users_path %>
    <%= link_to "Posts", posts_path %>
  </div>
</div>


<% if @user.respond_to?(:posts) && @user.posts.any? %>
  <h2 class="mt-3">Posts by <%= @user.name.presence %></h2>
  <div class="post-list mt-2">
    <% @user.posts.each do |post| %>
      <article class="post">
        <h3><%= link_to post.title, post %></h3>
        <p class="meta"><%= l(post.created_at, format: :short) %></p>
        <div class="actions">
          <%= link_to "Show", post_path(post) %>
          <%= link_to "Edit", edit_post_path(post) %>
        </div>
      </article>
    <% end %>
  </div>
<% end %>

<% if @user.respond_to?(:comments) && @user.comments.any? %>
  <h2 class="mt-3">Comments by <%= @user.name.presence %></h2>
  <div class="post-list mt-2">
    <% @user.comments.each do |post| %>
      <article class="comment">
        <p class="meta"><%= l(post.created_at, format: :short) %></p>
        <div class="actions">
          <%= post.body%>
        </div>
      </article>
    <% end %>
  </div>
<% end %>
